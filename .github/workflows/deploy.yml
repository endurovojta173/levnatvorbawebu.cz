name: Deploy React na Hukot

on:
  push:
    branches:
      - main

jobs:
  web-deploy:
    name: ğŸ‰ Build & Deploy
    runs-on: ubuntu-latest
    steps:
    - name: ğŸšš Stahuji nejnovÄ›jÅ¡Ã­ kÃ³d
      uses: actions/checkout@v4

    # 1. PÅ˜IDÃNO: MusÃ­me mÃ­t Node.js, abychom mohli sestavit aplikaci
    - name: âš™ï¸ Nastavuji Node.js
      uses: actions/setup-node@v4
      with:
        node-version: 20

    # 2. PÅ˜IDÃNO: Instalace knihoven (React, Vite, atd.)
    - name: ğŸ“¦ Instaluji zÃ¡vislosti
      run: npm ci

    # 3. PÅ˜IDÃNO: Tady se dÄ›je magie - vÃ½roba sloÅ¾ky "dist"
    - name: ğŸ—ï¸ Build projektu
      run: npm run build

    # 4. UPRAVENO: NahrÃ¡vÃ¡me jen hotovou sloÅ¾ku "dist"
    - name: ğŸ“‚ KopÃ­ruji sloÅ¾ku dist na FTP
      uses: SamKirkland/FTP-Deploy-Action@v4.3.5
      with:
        server: ${{ secrets.FTP_SERVER }}
        username: ${{ secrets.FTP_USERNAME }}
        password: ${{ secrets.FTP_PASSWORD }}
        # TOTO JE KLÃÄŒOVÃ‰:
        local-dir: ./dist/ 
        server-dir: ./www       # Pokud mÃ¡te na FTP prÃ¡zdnou sloÅ¾ku www, nechte ./
        security: loose